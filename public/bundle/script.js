(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function o(t,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(void 0,r=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,"string");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(a.key),"symbol"===e(r)?r:String(r)),a)}var r}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,a;return n=e,a=[{key:"init",value:function(t,n){document.body.style.overflow="hidden";var o=document.createElement("div");o.id="whois-lookup-shadow-host",o.attachShadow({mode:"open"}),document.getElementsByTagName("body")[0].appendChild(o),o.shadowRoot&&(e.shadowRoot=o.shadowRoot);var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=chrome.runtime.getURL("/bundle/main.css"),e.shadowRoot.appendChild(a);var r=document.createElement("div");r.id="whois-lookup-container",r.classList.add("overlay-container","fade-entry-anime","flex-layout","flex-dir-col","justify-space-between"),e.shadowRoot.appendChild(r);var i=document.createElement("div");i.classList.add("modal-container","flex-layout","flex-dir-col","justify-space-between"),i.appendChild(e.getHeaderElement(t)),i.appendChild(e.getBodyElement()),i.appendChild(e.getFooterElement(n)),r.appendChild(i),e.fetchWhoisInfo(t)}},{key:"toggleFeatureButton",value:function(t,n){e.whoisTab&&e.serverTab&&(e.setLoadingState(),e[n].classList.remove("btn-outlined"),e[t].classList.remove("btn-primary"),e[n].classList.add("btn-primary"),e[t].classList.add("btn-outlined"))}},{key:"fetchWhoisInfo",value:function(t){e.toggleFeatureButton("serverTab","whoisTab"),t.postMessage({status:"fetch-domain-info",data:{hostname:window.location.hostname}})}},{key:"fetchServerInfo",value:function(t){e.toggleFeatureButton("whoisTab","serverTab"),t.postMessage({status:"fetch-dns-info",data:{hostname:window.location.hostname}})}},{key:"getHeaderElement",value:function(t){var n=document.createElement("div"),o=document.createElement("div");o.classList.add("modal-header","flex-layout","flex-dir-col","row-gap-5");var a=document.createElement("h2");a.classList.add("bold-text","text-primary"),a.textContent="Domain information";var r=document.createElement("h5");return r.classList.add("text-secondary"),r.textContent=window.location.hostname,o.append(a,r),n.append(o,e.getFeatureTabs(t)),n}},{key:"getFeatureTabs",value:function(t){var n=document.createElement("div");return n.classList.add("flex-layout","width-100"),e.whoisTab=document.createElement("button"),e.whoisTab.classList.add("feature-btn","btn","btn-primary","width-100"),e.whoisTab.textContent="Whois lookup",e.whoisTab.onclick=function(){e.fetchWhoisInfo(t)},e.serverTab=document.createElement("button"),e.serverTab.classList.add("feature-btn","btn","btn-outlined","width-100"),e.serverTab.textContent="Server information",e.serverTab.onclick=function(){e.fetchServerInfo(t)},n.append(e.whoisTab,e.serverTab),n}},{key:"getBodyElement",value:function(){return e.bodyElement=document.createElement("div"),e.bodyElement.classList.add("modal-body","flex-layout","flex-dir-col","justify-center","items-center","row-gap-10"),e.bodyElement}},{key:"getFooterElement",value:function(t){var n=document.createElement("div");n.classList.add("modal-footer","flex-layout","justify-center");var o=document.createElement("button");return o.classList.add("btn","btn-primary"),o.innerHTML="Got it",o.onclick=function(){e.shadowRoot.host.remove(),document.body.style.overflow="auto",t()},n.appendChild(o),n}},{key:"setLoadingState",value:function(){e.bodyElement.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" style=\'stroke: var(--whois-lookup-primary-color);\' stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg>'}},{key:"getUISection",value:function(e,t){var n=document.createElement("div");n.classList.add("section-div","flex-layout","flex-dir-col","row-gap-5");var o=document.createElement("h5");o.classList.add("text-secondary"),o.innerHTML=e;var a=document.createElement("h3");return a.classList.add("text-primary","bold-text"),a.innerHTML=t,n.append(o,a),n}},{key:"getDetailsTag",value:function(n,o){var a=document.createElement("details");a.classList.add("detail-tag","width-100");var r=document.createElement("summary");r.classList.add("bold-text","text-secondary"),r.innerHTML=n;var i=document.createElement("div");return i.classList.add("flex-layout","flex-wrap","col-gap-10","row-gap-10"),i.append.apply(i,t(Object.keys(o).map((function(t){return e.getUISection(t,o[t])})))),a.append(r,i),a}},{key:"combineSections",value:function(e){var n=document.createElement("div");return n.classList.add("flex-layout","flex-dir-col","width-100"),n.append.apply(n,t(e)),n}},{key:"loadWhoisInfo",value:function(n){var o=e.combineSections([e.getUISection("Created on",new Date(n.create_date).toUTCString()),e.getUISection("Updated on",new Date(n.update_date).toUTCString()),e.getUISection("Expire on",new Date(n.expire_date).toUTCString())]),a=e.combineSections([e.getUISection("Domain ID",n.domain_id),e.getUISection("Domain age (days)",n.domain_age.toString())]),r=e.combineSections([].concat(t(function(t){return t.length?t.map((function(t,n){return e.getUISection("Nameserver #".concat(n+1),t)})):[]}(n.nameservers)),[e.getUISection("Whois server",n.whois_server)])),i=e.getDetailsTag("Admin details",n.admin),s=e.getDetailsTag("Billing details",n.billing),l=e.getDetailsTag("Registrar details",n.registrar),c=e.getDetailsTag("Tech details",n.tech),d=e.getDetailsTag("Registrant details",n.registrant);e.bodyElement.innerHTML="",e.bodyElement.append(o,a,r,i,s,l,d,c)}},{key:"loadServerInfo",value:function(t){var n=e.combineSections([e.getUISection("IP Address",t.ip),e.getUISection("Internet Service Provider",t.isp)]),o=e.combineSections([e.getUISection("Latitude",t.latitude),e.getUISection("Longitude",t.latitude)]),a=e.combineSections([e.getUISection("Calling code",t.calling_code),e.getUISection("Languages",t.languages)]),r=e.getDetailsTag("<div class='flex-layout items-center col-gap-10' style='display: inline-block;'><span class='bold-text'>Location</span> <img src='".concat(t.country_flag,"' alt='").concat(t.country_name,"' style='width: 24px;' /></div>"),{city:t.city,district:t.district,state_prov:t.state_prov,country_name:t.country_name,continent_name:t.continent_name,zipcode:t.zipcode}),i=e.getDetailsTag("Currency",t.currency),s=e.getDetailsTag("Timezone",t.time_zone);e.bodyElement.innerHTML="",e.bodyElement.append(n,o,a,r,i,s)}},{key:"loadError",value:function(){e.bodyElement.innerHTML="";var t=document.createElement("h4");t.classList.add("text-secondary","text-center"),t.innerHTML="Error while fetching the data. Please try again later.",e.bodyElement.appendChild(t)}}],null&&o(n.prototype,null),a&&o(n,a),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=null;chrome.runtime.onMessage.addListener((function(e,t,n){console.log(7,e,i),"init-modal-ui"===e.status&&(i||(i=chrome.runtime.connect({name:"connect"})),a.init(i,(function(){null==i||i.postMessage({status:"close-extension"}),i=null})),i.onMessage.addListener((function(e,t){switch(console.log(31,e),e.status){case"load-domain-info":"object"===r(e.data)?a.loadWhoisInfo(e.data):a.loadError();break;case"load-dns-info":"object"===r(e.data)?a.loadServerInfo(e.data):a.loadError()}})))}))})();